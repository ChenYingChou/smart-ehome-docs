通訊轉接模組 ↔ 本地伺服器
---

1. 標準 json 格式: Cmd, {Server,} {Module,} Device, Function, Value, {Auth-Token}
範例: 設定空調温度為 26 度。(由 Server 發向通訊轉接模組)
    ```JSON
    {
        "cmd": 1,
        "module": "Your Module ID",
        "device": "Conditioner",
        "function": "Temperature",
        "value": 26
    }
    ```
2. 第一次向管理系統註冊:
    * REST API: POST "http://local-server/api"
    * MQTT: mqtt://local-server
        * 送出 topic = "public"
        * 接收 topic = "reply"
    * 送出本模組所擁有的 "設備/功能/類型/情境/UI 元件":
        ```JSON
        {
            "cmd": 99,
            "module": "**My-ID**",  // 模組 ID
            "name": "**模組名稱**"
            "devices": [            // 設備陣列
                {   // 第一個設備
                    "id": "**Device1**":        // 設備 ID
                    "name": "**設備名稱**"
                    "functions": [              // 功能陣列
                        {   // 第一個功能
                            "id": "**DI-1**",       // 功能 ID
                            "name": "**功能名稱**",
                            "value": "__Value__",   // 1, 2, 3, 100/n, n1~n2       
                            "type": 1,              // 控制輸入:1, 狀態輸出:0, 輸出入:3
                            "ui": "__UI__"          // UI 元件
                        },
                        // 第 2,3,... 功能
                    ]
                },
                // 第 2,3,... 設備
            ],
            "key": "**至少8個字元隨機字串**"
        }
        ```
    * 接收回應 JSON 格式:
        ```JSON
        {
            "status": 0,                // 0:成功, 非零:錯誤
            "payload": "**msg**"        // 加密資料 或 錯誤訊息
        }
        ```
        1. 註冊成功時返回 payload 要以 AES CTR 演算法用送出的 key 去解密，參考 [AES-JS](https://github.com/ricmoo/aes-js)。
        2. 註冊失敗返回
3.



