本地伺服器模組
---

#### 功能概述
* 通訊轉接模組註冊及解除。
* 經由網路接收用戶控制指令, 轉發到各通訊轉接模組。
* 儲存各設備最新狀態, 轉發到連線用戶設備上。
* 用戶可自定警示條件 (數值範圍及持續時間), 達到條件可經由訊息通知。
* 情境、智慧控制或排程控管。
* 日誌記錄: 分一般及警示。
* 其他服務: 天氣查詢 ...
* 監控管理伺服器。
* App 初始化連線, QR-Code 下載設定等處理。
* MQ 管理
* 通訊轉接模組自動偵測是否離線，超過指定時間則移除並通知管理者。
* 管理日誌、通訊轉接模組手動新增/移除、其他服務 ...

#### 預估模組
1. 路由模組 (接收 Public Queue)：
    * 檢查訊息合法性。
    * 記錄該模組／設備最新狀態值及時間戳記。
    * 若為 Server 為本地，則丟往管理模組。
    * 若為狀態回應訊息，則將 Server 標記為本地伺服器 ID 再轉丟向雲端伺服器。
2. 管理模組：
    * 檢查登入授權合法性，回應訊息。
    * 接收用戶控制命令，轉送到指定 Queue ID。
    * 若模組/設備/狀態需統計儲存，則轉交資料統計模組進一步處理。
    * 模組/設備/狀態異常及關注處理: 若達到觸發條件時轉通知模組處理。
3. 資料統計模組:
    * 儲存模組/設備/狀態+時間。
    * 是否轉區間值 (小時、日、週、月)、如何轉換該值 (平均值:温度、最終值:電表、與前筆之差:電表)、及何時轉換/統計?
    * 排程轉換?
    * 資料保存在那裡? 保存多久?
4. 通知模組:
    * 根據設定檔轉發通知訊息，如: 發 email、簡訊、Android 推播、iOS 推播、自行推播...。
    * 記錄通知回應狀態 (是否成功)。
    * 連續或超過指定時間仍無法轉送訊息，則發出系統警告 (email、訊息通知系統管理者)。
5. Web 模組:
    * 情境、智慧控制或排程設計。
    * 
    
